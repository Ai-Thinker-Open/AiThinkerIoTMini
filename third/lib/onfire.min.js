!function(n,t){"object"==typeof module&&module.exports?module.exports=t():n.onfire=t()}("undefined"!=typeof window?window:this,function(){var n={},t=0,e="string",o="function",i=Function.call.bind(Object.hasOwnProperty),r=Function.call.bind(Array.prototype.slice);function u(r,u,f,c){if(typeof r!==e||typeof u!==o)throw new Error("args: "+e+", "+o);return i(n,r)||(n[r]={}),n[r][++t]=[u,f,c],[r,t]}function f(n,t){for(var e in n)i(n,e)&&t(e,n[e])}function c(t,e){i(n,t)&&f(n[t],function(o,i){i[0].apply(i[2],e),i[1]&&delete n[t][o]})}return{on:function(n,t,e){return u(n,t,0,e)},one:function(n,t,e){return u(n,t,1,e)},un:function(t){var r,u,c=!1,l=typeof t;return l===e?!!i(n,t)&&(delete n[t],!0):"object"===l?(r=t[0],u=t[1],!(!i(n,r)||!i(n[r],u)||(delete n[r][u],0))):l!==o||(f(n,function(e,o){f(o,function(o,i){i[0]===t&&(delete n[e][o],c=!0)})}),c)},fire:function(n){var t=r(arguments,1);setTimeout(function(){c(n,t)})},fireSync:function(n){c(n,r(arguments,1))},clear:function(){n={}}}});